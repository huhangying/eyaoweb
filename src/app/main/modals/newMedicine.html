<div class="modal-header">
	<h3 class="modal-title pull-left" id="modal-title">创建新处方</h3>

	<button type="button" class="close pull-right" aria-label="Close" ng-click="$dismiss()">
		<span aria-hidden="true">&times;</span>
	</button>
</div>

<div cg-busy="myPromise"></div>
<div class="modal-body clearfix" id="modal-body">
	<div>
		<select class="form-control" ng-model="selectedMedicine"
						ng-options="option.name for option in medicines track by option._id">
		</select>
	</div>
	<hr/>
	<form name="medicineForm" >


		<div class="row">
			<div class="col-md-6">
				<div class="form-group">
					<label for="inputName" class="control-label">药名</label>
					<input type="text" class="form-control" id="inputName" placeholder="" ng-model="selectedMedicine.name" required />
				</div>
			</div>
			<div class="col-sm-2">
				<div class="form-group">
					<label for="inputUsage" class="control-label">使用方法</label>
					<select class="form-control" ng-model="selectedMedicine.usage" id="inputUsage" required>
						<option value="内服">内服</option>
						<option value="外用">外用</option>
					</select>
				</div>
			</div>
			<div class="col-sm-2">
				<div class="form-group">
					<label for="inputCapacity" class="control-label">药品总量</label>
					<input type="number" class="form-control" id="inputCapacity" ng-model="selectedMedicine.capacity" min="0" max="10000" required />
				</div>
			</div>
			<div class="col-sm-2">
				<div class="form-group">
					<label for="inputCapacity" class="control-label">单位</label>
					<select class="form-control" ng-model="selectedMedicine.unit" required>
						<option value="粒" selected>粒</option>
						<option value="毫升">毫升</option>
					</select>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="col-sm-3">
				<label class="control-label">服药时间</label>
				<select class="form-control" ng-model="selectedMedicine.dosage.way" required>
					<option value="0">-- 请选择 --</option>
					<option value="1">饭后</option>
					<option value="2">饭前</option>
					<option value="3">饭中</option>
					<option value="4">睡前</option>
					<option value="5">每4小时</option>
					<option value="6">每8小时</option>
					<option value="7">每12小时</option>
					<option value="8">每天</option>
					<option value="9">隔天</option>
				</select>
			</div>
			<div class="col-sm-3">
				<div class="form-group">
					<label for="inputFrequency" class="control-label">服用频率</label>
					<input type="number" class="form-control" id="inputFrequency" min="0" max="100"
								 ng-model="selectedMedicine.dosage.frequency" required />
				</div>
			</div>
			<div class="col-sm-6">
				<div class="form-group">
					<label for="inputCount" class="control-label">每次</label>
					<div class="input-group">
						<input type="number" class="form-control" id="inputCount" min="0"
									 ng-model="selectedMedicine.dosage.count" required />
						<span class="input-group-addon" id="basic-addon1">.</span>
						<input type="number" class="form-control" id="inputCountFractions" min="0"
									 ng-model="selectedMedicine.dosage.countFractions" required />
					</div>

				</div>
			</div>
		</div>
		<table class="table" ng-show="newMedicine.optionNumber > 0">
			<thead class="bold-text bg-info">
			<td style="width:4%">#</td>
			<td style="width:76%">答案</td>
			<td style="width:10%">用户填空</td>
			<td style="width:10%" ng-if="newMedicine.weight>0">分值</td>
			</thead>
			<tbody>
			<tr ng-repeat="option in newMedicine.options track by $index">
				<td>{{$index+1}}</td>
				<td><input type="text" class="form-control" ng-model="option.answer" placeholder="设置答案"></td>
				<td><input type="checkbox" class="form-control" ng-model="option.input_required"></td>
				<td><input type="number" class="form-control" ng-model="option.weight" ng-if="newMedicine.weight>0"></td>
			</tr>
			</tbody>
		</table>

	</form>

</div>
<div class="modal-footer">
	<button class="btn btn-primary" type="button" ng-click="selectOk()">选择</button>
	<button class="btn btn-warning" type="button" ng-click="$dismiss()">取消</button>
</div>

